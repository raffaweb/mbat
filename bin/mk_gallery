#!/bin/bash

imgdir=assets/img/gallery
tmumbdir=$imgdir/t

(
echo "var gallery = ["

for img in $imgdir/*.JPG; do
    bn=$(basename $img)
    convert $img -thumbnail x200 -resize '200x<' -resize 50% -gravity center -crop 100x100+0+0 +repage -format jpg -quality 91 $tmumbdir/$bn
    cat <<EOF
    {
        title: '',
        href: '$img',
        type: 'image/jpeg',
        thumbnail: '$tmumbdir/$bn'
    },
EOF
done

echo "];"
) > gallery.js
